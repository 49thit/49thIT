<!DOCTYPE html>
<html lang="{{ page.lang | default: "en" }}" class="html" data-theme="{{ site.theme_config.appearance | default: "auto" }}">
        {%- include head.html -%}
  <body>
    <main class="page-content" aria-label="Content">
      <header class="site-banner" role="banner">
        <div class="site-banner__panel" aria-hidden="true">
          <div class="site-banner__command-line">
            <span class="site-banner__prompt-label" data-label="core.gacis.ak:>_"></span>
            <span class="site-banner__typed" data-text="49thIT"></span>
            <span class="site-banner__cursor" aria-hidden="true"></span>
          </div>
        </div>
        <span class="sr-only">49thIT</span>
      </header>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const typedEl = document.querySelector(".site-banner__typed");
          const cursorEl = document.querySelector(".site-banner__cursor");
          const commandLine = document.querySelector(".site-banner__command-line");
          const promptLabel = commandLine ? commandLine.querySelector(".site-banner__prompt-label") : null;
          if (!typedEl || !cursorEl || !commandLine) return;

          const segments = [
            { text: "49", className: "segment-leading" },
            { text: "th", className: "segment-small" },
            { text: "IT", className: "segment-trailing" }
          ];

          if (promptLabel) {
            promptLabel.textContent = promptLabel.dataset.label || "core.gacis.ak:>_";
          }

          const letterDelay = 140;
          let typingActive = false;
          let typedOnce = false;

          typedEl.innerHTML = "";
          cursorEl.classList.remove("is-complete");
          cursorEl.setAttribute("role", "button");
          cursorEl.setAttribute("tabindex", "0");
          cursorEl.setAttribute("aria-label", "Type command 49thIT");

          function typeCommand() {
            if (typingActive || typedOnce) return;
            typingActive = true;
            commandLine.classList.add("is-active");
            cursorEl.classList.add("is-typing");
            typedEl.innerHTML = "";
            cursorEl.classList.add("is-hidden");

            let segmentIndex = 0;
            let charIndex = 0;
            let currentSpan = null;

            function finishTyping() {
              cursorEl.classList.remove("is-typing");
              cursorEl.classList.add("is-complete");
              cursorEl.classList.add("is-hidden");
              cursorEl.removeAttribute("role");
              cursorEl.removeAttribute("tabindex");
              typingActive = false;
              typedOnce = true;
            }

            function step() {
              if (segmentIndex >= segments.length) {
                finishTyping();
                return;
              }

              const segment = segments[segmentIndex];
              if (!currentSpan) {
                currentSpan = document.createElement("span");
                if (segment.className) currentSpan.className = segment.className;
                typedEl.appendChild(currentSpan);
              }

              currentSpan.textContent += segment.text.charAt(charIndex);
              charIndex += 1;

              if (charIndex >= segment.text.length) {
                segmentIndex += 1;
                charIndex = 0;
                currentSpan = null;
              }

              if (segmentIndex >= segments.length) {
                finishTyping();
              } else {
                setTimeout(step, letterDelay);
              }
            }

            setTimeout(step, letterDelay);
          }

          function handleActivation(event) {
            if (event.type === "keydown" && event.key !== "Enter" && event.key !== " ") {
              return;
            }
            event.preventDefault();
            typeCommand();
          }

          cursorEl.addEventListener("click", handleActivation);
          cursorEl.addEventListener("keydown", handleActivation);
        });
      </script>
      <div class="layout-container">
        <aside class="sidebar">
          {% include sidebar.html %}
        </aside>
        <section class="main-content">
          {{ content }}
          <div class="credits">
            {%- if site.theme_config.show_copyright == true -%}
          &copy;&nbsp;{{ "now" | date: "%Y" }}&nbsp;{{site.author}}
          &nbsp;
          {%- endif -%}
          </div>
        </section>
      </div>
    </main>
  </body>
</html>
